generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = "postgresql://postgres:password@localhost:5432/rocbird_staffing"
}

enum TalentStatus {
  ACTIVE
  INACTIVE
}

enum InteractionType {
  CALL
  ONE_ON_ONE
  FEEDBACK
  GENERAL
}

enum InteractionStatus {
  STARTED
  PENDING
  COMPLETED
}

model Talent {
  id             String            @id @default(cuid())
  fullName       String
  seniority      String
  role           String
  status         TalentStatus      @default(ACTIVE)
  leaderId       String?
  mentorId       String?

  leader         TechnicalLead?    @relation("LeaderOf", fields: [leaderId], references: [id])
  mentor         TechnicalLead?    @relation("MentorOf", fields: [mentorId], references: [id])
  interactions   Interaction[]

  createdAt      DateTime          @default(now())
  updatedAt      DateTime          @updatedAt
}

model TechnicalLead {
  id               String    @id @default(cuid())
  fullName         String    @unique

  talentsLed       Talent[]  @relation("LeaderOf")
  talentsMentored  Talent[]  @relation("MentorOf")

  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt
}

model Interaction {
  id                  String            @id @default(cuid())
  type                InteractionType
  date                DateTime
  details             String           
  status              InteractionStatus @default(STARTED)
  modifiedAt          DateTime          @updatedAt

  talentId            String
  talent              Talent            @relation(fields: [talentId], references: [id], onDelete: Cascade)

  createdAt           DateTime          @default(now())
}